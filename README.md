# tabu# CVRP Solver with Genetic Algorithm

A C++ implementation of a Capacitated Vehicle Routing Problem (CVRP) solver using Genetic Algorithm.

## Features

- **Genetic Algorithm** with multiple initialization methods (Random, Sweep, Cluster-based)
- **Command Line Interface** for flexible parameter configuration
- **Multiple Crossover Operators** (One-Point, Order Crossover, PMX)
- **Local Search Optimization** (2-opt improvement)
- **Automated Testing** via GitHub Actions and batch scripts
- **CSV Results Export** for performance analysis

## Usage

### Basic Usage

```bash
# Compile the solver
g++ -std=c++17 -O3 -o cvrp_solver ga8.cpp

# Run with default parameters (CMT4.vrp)
./cvrp_solver

# Run with custom VRP file
./cvrp_solver CMT1.vrp

# Run with custom parameters
./cvrp_solver CMT4.vrp 2000 500
```

### Command Line Arguments

```
./cvrp_solver [filename.vrp] [maxGenerations] [populationSize]
```

- `filename.vrp`: VRP instance file (default: CMT4.vrp)
- `maxGenerations`: Number of GA generations (default: 10000)
- `populationSize`: Size of GA population (default: 1000)

### Examples

```bash
# Quick test with reduced parameters
./cvrp_solver CMT1.vrp 500 100

# High-quality run for large instance
./cvrp_solver CMT5.vrp 5000 1000

# Default instance with custom GA parameters
./cvrp_solver CMT4.vrp 3000 800
```

## Batch Testing

### Linux/macOS (Bash)

```bash
# Make script executable
chmod +x run_batch_test.sh

# Run with default settings
./run_batch_test.sh

# Run with custom parameters
./run_batch_test.sh -g 2000 -p 500

# Run specific instances
./run_batch_test.sh -i CMT1,CMT4 -g 1500

# Show help
./run_batch_test.sh --help
```

### Windows (PowerShell)

```powershell
# Run with default settings
.\run_batch_test.ps1

# Run with custom parameters
.\run_batch_test.ps1 -Generations 2000 -Population 500

# Run specific instances
.\run_batch_test.ps1 -Instances @("CMT1","CMT4") -Generations 1500

# Show help
.\run_batch_test.ps1 -Help
```

## GitHub Actions

The repository includes automated CI/CD workflows:

### Manual Trigger

1. Go to **Actions** tab in GitHub
2. Select **CVRP Solver CI** workflow
3. Click **Run workflow**
4. Specify parameters:
   - VRP instance (e.g., CMT4.vrp)
   - Generations (e.g., 1000)
   - Population size (e.g., 200)

### Automatic Testing

- **Push/PR triggers**: Runs default test suite
- **Matrix testing**: Tests multiple instances with different parameters
- **Performance analysis**: Measures execution time and memory usage

## Algorithm Details

### Initialization Methods
- **40% Sweep-based**: Polar angle sorting with 2-opt improvement
- **30% Random**: Random customer assignment with capacity constraints  
- **30% Cluster-based**: K-means clustering with feasibility repair

### Genetic Operators
- **Selection**: Fitness-based with elitism (15% best + 15% random)
- **Crossover**: One-Point (33%), Order Crossover (33%), PMX (34%)
- **Mutation**: Customer swap with 30% probability
- **Repair**: Automatic capacity and route validation

### Local Search
- **2-opt improvement**: Applied to individual routes
- **Capacity repair**: Ensures feasible solutions
- **Customer repair**: Handles missing/duplicate customers

## File Formats

### VRP File Format
```
NAME : CMT1
COMMENT : Generated by XXX
TYPE : CVRP
DIMENSION : 51
EDGE_WEIGHT_TYPE : EUC_2D
CAPACITY : 160
NODE_COORD_SECTION
1 40 50
2 45 68
...
DEMAND_SECTION  
1 0
2 10
...
DEPOT_SECTION
1
-1
EOF
```

### Results CSV Format
```csv
Instance,Total Vehicles,Population Size,Best Cost
CMT1,5,200,524.61
CMT2,3,200,835.26
```

## Performance Tips

### For Quick Testing
```bash
./cvrp_solver instance.vrp 500 100
```

### For High Quality Solutions
```bash  
./cvrp_solver instance.vrp 5000 1000
```

### For CI/CD
```bash
./cvrp_solver instance.vrp 1000 200
```

## Troubleshooting

### Compilation Issues
```bash
# Ensure C++17 support
g++ --version

# Install build tools (Ubuntu)
sudo apt-get install build-essential

# Install build tools (macOS) 
xcode-select --install
```

### Runtime Issues
- **File not found**: Ensure VRP file is in current directory
- **Memory issues**: Reduce population size for large instances  
- **Timeout**: Reduce generations for CI/CD environments

## Contributing

1. Fork the repository
2. Create feature branch
3. Make changes with tests
4. Submit pull request

## License

This project is available for educational and research purposes.
